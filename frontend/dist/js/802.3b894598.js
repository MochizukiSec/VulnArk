"use strict";(self["webpackChunkvuln_management_frontend"]=self["webpackChunkvuln_management_frontend"]||[]).push([[802],{32802:(n,t,e)=>{e.r(t),e.d(t,{default:()=>x});var i=e(20641),a=e(90033),o=e(53751),r={class:"app-container"},l={class:"app-header"},c={class:"header-left"},u={class:"logo"},s={class:"main-nav"},f={class:"header-right"},d={class:"notification-menu"},k={class:"notification-header"},v={key:0,class:"notification-list"},m={class:"notification-content"},p={class:"notification-content-title"},b={class:"notification-content-msg"},g={class:"notification-time"},h={key:1,class:"notification-empty"},_={class:"user-profile"},L={class:"username"},w={class:"main-content"},F={class:"page-content"};function W(n,t,e,W,C,N){var E=(0,i.g2)("router-link"),y=(0,i.g2)("el-dropdown-item"),A=(0,i.g2)("el-dropdown-menu"),X=(0,i.g2)("el-dropdown"),I=(0,i.g2)("el-button"),x=(0,i.g2)("el-badge"),z=(0,i.g2)("el-popover"),P=(0,i.g2)("el-avatar"),R=(0,i.g2)("router-view");return(0,i.uX)(),(0,i.CE)("div",r,[(0,i.Lk)("header",l,[(0,i.Lk)("div",c,[(0,i.Lk)("h1",u,[(0,i.bF)(E,{to:"/dashboard"},{default:(0,i.k6)((function(){return t[0]||(t[0]=[(0,i.eW)("漏洞管理平台")])})),_:1})]),(0,i.Lk)("nav",s,[(0,i.bF)(E,{to:"/dashboard",class:"nav-item","active-class":"nav-active"},{default:(0,i.k6)((function(){return t[1]||(t[1]=[(0,i.Lk)("i",{class:"el-icon-s-home"},null,-1),(0,i.eW)(" 仪表盘 ")])})),_:1}),(0,i.bF)(X,{trigger:"hover",class:"nav-item-dropdown"},{dropdown:(0,i.k6)((function(){return[(0,i.bF)(A,null,{default:(0,i.k6)((function(){return[(0,i.bF)(y,null,{default:(0,i.k6)((function(){return[(0,i.bF)(E,{to:"/vulnerabilities",class:"dropdown-link"},{default:(0,i.k6)((function(){return t[2]||(t[2]=[(0,i.eW)("漏洞列表")])})),_:1})]})),_:1}),(0,i.bF)(y,null,{default:(0,i.k6)((function(){return[(0,i.bF)(E,{to:"/vulnerabilities/create",class:"dropdown-link"},{default:(0,i.k6)((function(){return t[3]||(t[3]=[(0,i.eW)("创建漏洞")])})),_:1})]})),_:1}),(0,i.bF)(y,null,{default:(0,i.k6)((function(){return[(0,i.bF)(E,{to:"/vulnerabilities/import",class:"dropdown-link"},{default:(0,i.k6)((function(){return t[4]||(t[4]=[(0,i.eW)("导入漏洞")])})),_:1})]})),_:1})]})),_:1})]})),default:(0,i.k6)((function(){return[t[5]||(t[5]=(0,i.Lk)("div",{class:"nav-item"},[(0,i.Lk)("i",{class:"el-icon-warning"}),(0,i.eW)(" 漏洞管理 "),(0,i.Lk)("i",{class:"el-icon-arrow-down nav-arrow"})],-1))]})),_:1}),(0,i.bF)(E,{to:"/vulndatabase",class:"nav-item","active-class":"nav-active"},{default:(0,i.k6)((function(){return t[6]||(t[6]=[(0,i.Lk)("i",{class:"el-icon-collection"},null,-1),(0,i.eW)(" 漏洞库 ")])})),_:1}),(0,i.bF)(X,{trigger:"hover",class:"nav-item-dropdown"},{dropdown:(0,i.k6)((function(){return[(0,i.bF)(A,null,{default:(0,i.k6)((function(){return[(0,i.bF)(y,null,{default:(0,i.k6)((function(){return[(0,i.bF)(E,{to:"/assets",class:"dropdown-link"},{default:(0,i.k6)((function(){return t[7]||(t[7]=[(0,i.eW)("资产列表")])})),_:1})]})),_:1}),(0,i.bF)(y,null,{default:(0,i.k6)((function(){return[(0,i.bF)(E,{to:"/assets/create",class:"dropdown-link"},{default:(0,i.k6)((function(){return t[8]||(t[8]=[(0,i.eW)("创建资产")])})),_:1})]})),_:1})]})),_:1})]})),default:(0,i.k6)((function(){return[t[9]||(t[9]=(0,i.Lk)("div",{class:"nav-item"},[(0,i.Lk)("i",{class:"el-icon-office-building"}),(0,i.eW)(" 资产管理 "),(0,i.Lk)("i",{class:"el-icon-arrow-down nav-arrow"})],-1))]})),_:1}),(0,i.bF)(E,{to:"/reports",class:"nav-item","active-class":"nav-active"},{default:(0,i.k6)((function(){return t[10]||(t[10]=[(0,i.Lk)("i",{class:"el-icon-document"},null,-1),(0,i.eW)(" 报告中心 ")])})),_:1}),(0,i.bF)(E,{to:"/admin/users",class:"nav-item","active-class":"nav-active"},{default:(0,i.k6)((function(){return t[11]||(t[11]=[(0,i.Lk)("i",{class:"el-icon-user"},null,-1),(0,i.eW)(" 用户管理 ")])})),_:1})])]),(0,i.Lk)("div",f,[(0,i.bF)(z,{placement:"bottom",trigger:"click",width:"320"},{reference:(0,i.k6)((function(){return[(0,i.bF)(x,{value:W.unreadNotifications.length,hidden:!W.unreadNotifications.length,class:"notification-badge"},{default:(0,i.k6)((function(){return[(0,i.bF)(I,{type:"text",icon:"el-icon-bell",class:"notification-btn"})]})),_:1},8,["value","hidden"])]})),default:(0,i.k6)((function(){return[(0,i.Lk)("div",d,[(0,i.Lk)("div",k,[t[13]||(t[13]=(0,i.Lk)("span",{class:"notification-title"},"通知",-1)),W.notifications.length?((0,i.uX)(),(0,i.Wv)(I,{key:0,type:"text",size:"small",onClick:W.clearAllNotifications},{default:(0,i.k6)((function(){return t[12]||(t[12]=[(0,i.eW)(" 清除全部 ")])})),_:1},8,["onClick"])):(0,i.Q3)("",!0)]),W.notifications.length?((0,i.uX)(),(0,i.CE)("div",v,[((0,i.uX)(!0),(0,i.CE)(i.FK,null,(0,i.pI)(W.notifications,(function(n){return(0,i.uX)(),(0,i.CE)("div",{key:n.id,class:(0,a.C4)(["notification-item",{"is-read":n.read}])},[(0,i.Lk)("div",{class:(0,a.C4)(["notification-icon","icon-".concat(n.type)])},[(0,i.Lk)("i",{class:(0,a.C4)(W.getNotificationIcon(n.type))},null,2)],2),(0,i.Lk)("div",m,[(0,i.Lk)("h4",p,(0,a.v_)(n.title),1),(0,i.Lk)("p",b,(0,a.v_)(n.message),1),(0,i.Lk)("span",g,(0,a.v_)(W.formatTime(n.timestamp)),1)]),(0,i.bF)(I,{type:"text",size:"small",icon:"el-icon-close",onClick:function(t){return W.markNotificationRead(n.id)},class:"notification-close"},null,8,["onClick"])],2)})),128))])):((0,i.uX)(),(0,i.CE)("div",h,t[14]||(t[14]=[(0,i.Lk)("i",{class:"el-icon-bell"},null,-1),(0,i.Lk)("p",null,"暂无通知",-1)])))])]})),_:1}),(0,i.bF)(X,{trigger:"click",onCommand:W.handleCommand},{dropdown:(0,i.k6)((function(){return[(0,i.bF)(A,null,{default:(0,i.k6)((function(){return[(0,i.bF)(y,{command:"profile"},{default:(0,i.k6)((function(){return t[16]||(t[16]=[(0,i.Lk)("i",{class:"el-icon-user"},null,-1),(0,i.eW)(" 个人资料 ")])})),_:1}),(0,i.bF)(y,{divided:"",command:"logout"},{default:(0,i.k6)((function(){return t[17]||(t[17]=[(0,i.Lk)("i",{class:"el-icon-switch-button"},null,-1),(0,i.eW)(" 退出登录 ")])})),_:1})]})),_:1})]})),default:(0,i.k6)((function(){return[(0,i.Lk)("div",_,[(0,i.bF)(P,{size:32,src:W.userAvatar},{default:(0,i.k6)((function(){return[(0,i.eW)((0,a.v_)(W.userInitials),1)]})),_:1},8,["src"]),(0,i.Lk)("span",L,(0,a.v_)(W.user.firstName),1),t[15]||(t[15]=(0,i.Lk)("i",{class:"el-icon-arrow-down"},null,-1))])]})),_:1},8,["onCommand"])])]),(0,i.Lk)("div",w,[(0,i.Lk)("main",F,[(0,i.bF)(R,null,{default:(0,i.k6)((function(n){var t=n.Component;return[(0,i.bF)(o.eB,{name:"fade",mode:"out-in"},{default:(0,i.k6)((function(){return[((0,i.uX)(),(0,i.Wv)((0,i.$y)(t)))]})),_:2},1024)]})),_:1})])])])}e(28706),e(2008),e(44114),e(18111),e(22489),e(26099);var C=e(66278),N=e(75220),E=e(95093),y=e.n(E);const A={name:"AppLayout",setup:function(){var n=(0,C.Pj)(),t=(0,N.rd)(),e=(0,N.lq)(),a=(0,i.EW)((function(){return n.getters["auth/currentUser"]||{}})),o=(0,i.EW)((function(){return n.getters["auth/isAdmin"]})),r=(0,i.EW)((function(){return e.path})),l=(0,i.EW)((function(){return e.meta.title||"漏洞管理平台"})),c=(0,i.EW)((function(){return a.value.profilePicture||""})),u=(0,i.EW)((function(){return a.value.firstName&&a.value.lastName?"".concat(a.value.firstName.charAt(0)).concat(a.value.lastName.charAt(0)):a.value.username?a.value.username.charAt(0).toUpperCase():"?"})),s=(0,i.EW)((function(){return n.getters.notifications||[]})),f=(0,i.EW)((function(){return s.value.filter((function(n){return!n.read}))})),d=function(e){switch(e){case"profile":t.push("/profile");break;case"logout":n.dispatch("auth/logout"),t.push("/login");break}},k=function(t){n.dispatch("markNotificationRead",t)},v=function(){n.dispatch("clearNotifications")},m=function(n){return y()(n).fromNow()},p=function(n){switch(n){case"success":return"el-icon-success";case"warning":return"el-icon-warning";case"error":return"el-icon-error";case"info":default:return"el-icon-info"}};return{activeMenu:r,currentPageTitle:l,user:a,isAdmin:o,userAvatar:c,userInitials:u,notifications:s,unreadNotifications:f,handleCommand:d,markNotificationRead:k,clearAllNotifications:v,formatTime:m,getNotificationIcon:p}}};var X=e(66262);const I=(0,X.A)(A,[["render",W],["__scopeId","data-v-98beda20"]]),x=I}}]);
//# sourceMappingURL=802.3b894598.js.map